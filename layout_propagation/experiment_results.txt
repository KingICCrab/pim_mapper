=== Layout Propagation Experiment Results (No Cache) ===

Scenario:
- Producer (Conv1): Prefers Linear NCHW Layout (Output Stationary).
- Consumer (Conv2): Prefers Blocked N(C/16)HW(16) Layout (Input Stationary / Systolic Array).
- Conflict: Producer writes NCHW, Consumer wants Blocked.

Hardware Constraints:
- DRAM Row Size: 2048 bytes
- Burst Size: 32 bytes
- Element Size: 1 byte
- Array Size: 16 (Inner Tile)

Strategy Evaluation:

1. Direct Strategy (No Transform)
   - Layout: NCHW (Linear)
   - Producer Write: Sequential (Cost 1.0000) - Perfect.
   - Consumer Read: Strided (Cost 26.4219) - Very High.
     - Reason: Inner loop iterates C_in (16). In NCHW, C elements are separated by H*W (1024).
     - Result: High Row Miss Rate (~50%) and Low Burst Efficiency (1/32).
   - Total Cost: 27.4219

2. Transform Strategy (Transform-on-Write)
   - Layout: Blocked N(C_out)HW(C_in)
   - Producer Write: Strided (Cost 8.5781) - Moderate.
     - Reason: Inner loop iterates W. In Blocked Layout, W stride is C_in (16).
     - Result: Low Row Miss Rate (Sequential-ish), but Low Burst Efficiency (2 accesses per 32B burst).
   - Consumer Read: Sequential (Cost 1.0000) - Perfect.
   - Total Cost: 9.5781

Conclusion:
The system correctly selected "TRANSFORM_ON_WRITE".
It determined that paying the "Write Penalty" (8.58) is significantly cheaper than paying the "Read Penalty" (26.42).
This validates the Cost Model's ability to trade off Bandwidth (Burst Efficiency) and Latency (Row Misses) in a No-Cache environment.
