# PIM Optimizer Architecture Configuration
# ==========================================

architecture:
  name: "SimplePIM"

  # =========================================
  # PE Array Configuration
  # =========================================
  pe_array:
    dim_h: 8              # PE array height
    dim_w: 8              # PE array width (total 256 PEs)
    freq_mhz: 1000.0       # Operating frequency (MHz)
    # Compute Unit (per PE)
    unit_type: "scalar"    # Compute unit type: scalar, simd, tensor_core, reduction_tree, systolic
    num_macs: 1            # Parallel MAC units per PE
    mac_energy: 0.00056    # Energy per MAC operation (nJ, i.e., 0.56 pJ)
    reduction_latency: 0   # Reduction tree latency (cycles)
  
  # =========================================
  # Memory Hierarchy (innermost to outermost)
  # =========================================
  memory_hierarchy:
    # Level 0: PE Local Buffer (Register File)
    - name: "PELocalBuffer"
      entries: 16
      blocksize: 4           # bytes
      instances: 64         # one per PE
      latency: 1             # cycles
      access_cost: 0.001     # nJ per access
      stores: [true, true, true]  # [input, weight, output]
      bypass_defined: true
      # No bandwidth limit at PE level (direct register access)
    
    # Level 1: Global Buffer (shared scratchpad)
    - name: "GlobalBuffer"
      entries: 128           # 128 entries
      blocksize: 4          # bytes
      instances: 1
      latency: 1             # cycles
      access_cost: 0.01      # nJ per access
      stores: [true, true, true]
      bypass_defined: true
      # Bandwidth constraints for PE array access
      read_bandwidth: 32     # bytes/cycle
      write_bandwidth: 32    # bytes/cycle
      num_read_ports: 8      # Can serve 4 read requests per cycle
      num_write_ports: 1
    
    # Level 2: Row Buffer
    - name: "RowBuffer"
      entries: 1024           # 1024 entries
      blocksize: 16          # bytes
      instances: 1
      latency: 1             # cycles
      access_cost: 0.01      # nJ per access
      stores: [true, true, true]
      bypass_defined: true
      num_banks: 4
      row_buffer_size: 1024  # bytes
      read_bandwidth: 16
      write_bandwidth: 16
    
    # Level 3: Local DRAM
    - name: "LocalDRAM"
      entries: -1            # unlimited
      blocksize: 1024        # bytes (cache line)
      instances: 1
      latency: 25            # cycles (row activation)
      access_cost: 0.1       # nJ per access
      stores: [true, true, true]
      bypass_defined: true
      num_banks: 4
      row_buffer_size: 1024  # bytes
  
  # =========================================
  # DRAM Timing Parameters
  # =========================================
  dram_timings:
    RL: 25.0           # Read Latency (cycles)
    WL: 25.0           # Write Latency (cycles)
    tRCDRD: 14.0       # Row-to-Column delay for Read (cycles)
    tRCDWR: 14.0       # Row-to-Column delay for Write (cycles)
    tRP: 14.0          # Row Precharge (cycles)
    tCCDL: 2.0         # Column-to-Column delay Long (cycles)
    BL: 4              # Burst Length
    co_w: 256          # Data beat width (bits)
    data_pr: 8         # Element precision (bits)
