====================================================================================================
DETAILED DEBUG INFO FOR 'small' WORKLOAD
====================================================================================================

====================================================================================================
1. WORKLOAD CONFIGURATION
====================================================================================================
  Name: small
  Dimensions: R=3, S=3, P=16, Q=16, C=16, K=16, N=1
  Bounds: [3, 3, 16, 16, 16, 16, 1]
  MACs: 589824
  Stride: (1, 1)
  Dilation: (1, 1)

  Tensor Sizes:
    Input:  N=1 × C=16 × H=18 × W=18 = 5184 elements
    Weight: K=16 × C=16 × R=3 × S=3 = 2304 elements
    Output: N=1 × K=16 × P=16 × Q=16 = 4096 elements

  Relevancy Matrix O[dim][tensor] (1=relevant, 0=irrelevant):
    Dim      Input    Weight   Output  
    R        1        1        0       
    S        1        1        0       
    P        1        0        1       
    Q        1        0        1       
    C        1        1        0       
    K        0        1        1       
    N        1        0        1       

  Divisors per dimension:
    R: [1, 3]
    S: [1, 3]
    P: [1, 2, 4, 8, 16]
    Q: [1, 2, 4, 8, 16]
    C: [1, 2, 4, 8, 16]
    K: [1, 2, 4, 8, 16]
    N: [1]

====================================================================================================
2. OPTIMIZER RESULT
====================================================================================================

  Solver Status: optimal
  Solve Time: 1.44s

====================================================================================================
3. MAPPING DETAILS
====================================================================================================

  Layout:
    Input:  row_aligned
    Weight: sequential
    Output: sequential

  Tile Info:
    block_h: 18
    block_w: 18

  Loop Bounds (per memory level):
  Memory Hierarchy: Level 0=PE, Level 1=GlobalBuffer, Level 2=RowBuffer, Level 3=LocalDRAM

    Level 0:
      H: {'Q': 8, 'K': 2}
      W: {'P': 4, 'C': 4}
      Internal: (all 1s)
      temporal: {'R': 3, 'S': 3}

    Level 1:
      spatial: (all 1s)
      temporal: (all 1s)

    Level 2:
      spatial: (all 1s)
      temporal: (all 1s)

    Level 3:
      spatial: (all 1s)
      temporal: {'P': 4, 'Q': 2, 'C': 4, 'K': 8}

  Permutation (per memory level, inner to outer):
    Level 0: R -> S
    Level 1: 
    Level 2: 
    Level 3: K -> C -> P -> Q

  Tile Sizes (cumulative up to each level):
    Level 0: {'R': 3, 'S': 3}
    Level 1: {'R': 3, 'S': 3}
    Level 2: {'R': 3, 'S': 3}
    Level 3: {'R': 3, 'S': 3, 'P': 4, 'Q': 2, 'C': 4, 'K': 8}

====================================================================================================
4. DRAM LEVEL ANALYSIS (Level 2 + Level 3)
====================================================================================================

  DRAM Level Factors (Level 2 × Level 3):
    R: 1
    S: 1
    P: 4
    Q: 2
    C: 4
    K: 8
    N: 1

  Reuse Penalty per Tensor (irrelevant DRAM factors):
    Input: irrelevant dims = ['K'], penalty = 8
    Weight: irrelevant dims = ['P', 'Q', 'N'], penalty = 8
    Output: irrelevant dims = ['R', 'S', 'C'], penalty = 4

  Expected Unique Row Activations (simplified):
    For row_aligned: total_tiles = Π(DRAM factors)
    Total DRAM tiles: 256

====================================================================================================
5. ILP ROW ACTIVATION PREDICTIONS
====================================================================================================

  ILP Predicted Row Activations:
    Input:  57.6000
    Weight: 3.0000
    Output: 4.0000
    Total:  64.6000

====================================================================================================
6. TRACE GENERATION DETAILS
====================================================================================================

  DRAM Config:
    row_buffer_bytes: 1024
    num_banks: 4
    num_rows: 16384
    element_size: 1
    bank_size: 16777216 bytes (16 MB)

  Trace Statistics:
    Total trace lines: 58880

  Input (Bank 0):
    Total accesses: 7680
    Unique addresses: 5184
    Unique rows: 16
    Rows accessed: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
    Row activations (switches): 4096
    Row visit pattern:
      Row 0: activated 256 times
      Row 1: activated 256 times
      Row 2: activated 256 times
      Row 3: activated 256 times
      Row 4: activated 256 times
      Row 5: activated 256 times
      Row 6: activated 256 times
      Row 7: activated 256 times
      Row 8: activated 256 times
      Row 9: activated 256 times
      Row 10: activated 256 times
      Row 11: activated 256 times
      Row 12: activated 256 times
      Row 13: activated 256 times
      Row 14: activated 256 times
      Row 15: activated 256 times

  Weight (Bank 1):
    Total accesses: 18432
    Unique addresses: 2304
    Unique rows: 3
    Rows accessed: [0, 1, 2]
    Row activations (switches): 88
    Row visit pattern:
      Row 0: activated 16 times
      Row 1: activated 40 times
      Row 2: activated 32 times

  Output (Bank 2):
    Total accesses: 32768
    Unique addresses: 4096
    Unique rows: 4
    Rows accessed: [0, 1, 2, 3]
    Row activations (switches): 4
    Row visit pattern:
      Row 0: activated 1 times
      Row 1: activated 1 times
      Row 2: activated 1 times
      Row 3: activated 1 times

====================================================================================================
7. SAMPLE TRACE ENTRIES (First 100)
====================================================================================================
     0: LD 0x00000000 -> Input  Row=  0 Col=   0 <-- NEW ROW
     1: LD 0x00000012 -> Input  Row=  0 Col=  18
     2: LD 0x00000024 -> Input  Row=  0 Col=  36
     3: LD 0x00000001 -> Input  Row=  0 Col=   1
     4: LD 0x00000013 -> Input  Row=  0 Col=  19
     5: LD 0x00000025 -> Input  Row=  0 Col=  37
     6: LD 0x00000002 -> Input  Row=  0 Col=   2
     7: LD 0x00000014 -> Input  Row=  0 Col=  20
     8: LD 0x00000026 -> Input  Row=  0 Col=  38
     9: LD 0x00000400 -> Input  Row=  1 Col=   0 <-- NEW ROW
    10: LD 0x00000412 -> Input  Row=  1 Col=  18
    11: LD 0x00000424 -> Input  Row=  1 Col=  36
    12: LD 0x00000401 -> Input  Row=  1 Col=   1
    13: LD 0x00000413 -> Input  Row=  1 Col=  19
    14: LD 0x00000425 -> Input  Row=  1 Col=  37
    15: LD 0x00000402 -> Input  Row=  1 Col=   2
    16: LD 0x00000414 -> Input  Row=  1 Col=  20
    17: LD 0x00000426 -> Input  Row=  1 Col=  38
    18: LD 0x00000800 -> Input  Row=  2 Col=   0 <-- NEW ROW
    19: LD 0x00000812 -> Input  Row=  2 Col=  18
    20: LD 0x00000824 -> Input  Row=  2 Col=  36
    21: LD 0x00000801 -> Input  Row=  2 Col=   1
    22: LD 0x00000813 -> Input  Row=  2 Col=  19
    23: LD 0x00000825 -> Input  Row=  2 Col=  37
    24: LD 0x00000802 -> Input  Row=  2 Col=   2
    25: LD 0x00000814 -> Input  Row=  2 Col=  20
    26: LD 0x00000826 -> Input  Row=  2 Col=  38
    27: LD 0x00000C00 -> Input  Row=  3 Col=   0 <-- NEW ROW
    28: LD 0x00000C12 -> Input  Row=  3 Col=  18
    29: LD 0x00000C24 -> Input  Row=  3 Col=  36
    30: LD 0x00000C01 -> Input  Row=  3 Col=   1
    31: LD 0x00000C13 -> Input  Row=  3 Col=  19
    32: LD 0x00000C25 -> Input  Row=  3 Col=  37
    33: LD 0x00000C02 -> Input  Row=  3 Col=   2
    34: LD 0x00000C14 -> Input  Row=  3 Col=  20
    35: LD 0x00000C26 -> Input  Row=  3 Col=  38
    36: LD 0x00000036 -> Input  Row=  0 Col=  54 <-- NEW ROW
    37: LD 0x00000037 -> Input  Row=  0 Col=  55
    38: LD 0x00000038 -> Input  Row=  0 Col=  56
    39: LD 0x00000436 -> Input  Row=  1 Col=  54 <-- NEW ROW
    40: LD 0x00000437 -> Input  Row=  1 Col=  55
    41: LD 0x00000438 -> Input  Row=  1 Col=  56
    42: LD 0x00000836 -> Input  Row=  2 Col=  54 <-- NEW ROW
    43: LD 0x00000837 -> Input  Row=  2 Col=  55
    44: LD 0x00000838 -> Input  Row=  2 Col=  56
    45: LD 0x00000C36 -> Input  Row=  3 Col=  54 <-- NEW ROW
    46: LD 0x00000C37 -> Input  Row=  3 Col=  55
    47: LD 0x00000C38 -> Input  Row=  3 Col=  56
    48: LD 0x00000048 -> Input  Row=  0 Col=  72 <-- NEW ROW
    49: LD 0x00000049 -> Input  Row=  0 Col=  73
    50: LD 0x0000004A -> Input  Row=  0 Col=  74
    51: LD 0x00000448 -> Input  Row=  1 Col=  72 <-- NEW ROW
    52: LD 0x00000449 -> Input  Row=  1 Col=  73
    53: LD 0x0000044A -> Input  Row=  1 Col=  74
    54: LD 0x00000848 -> Input  Row=  2 Col=  72 <-- NEW ROW
    55: LD 0x00000849 -> Input  Row=  2 Col=  73
    56: LD 0x0000084A -> Input  Row=  2 Col=  74
    57: LD 0x00000C48 -> Input  Row=  3 Col=  72 <-- NEW ROW
    58: LD 0x00000C49 -> Input  Row=  3 Col=  73
    59: LD 0x00000C4A -> Input  Row=  3 Col=  74
    60: LD 0x0000005A -> Input  Row=  0 Col=  90 <-- NEW ROW
    61: LD 0x0000005B -> Input  Row=  0 Col=  91
    62: LD 0x0000005C -> Input  Row=  0 Col=  92
    63: LD 0x0000045A -> Input  Row=  1 Col=  90 <-- NEW ROW
    64: LD 0x0000045B -> Input  Row=  1 Col=  91
    65: LD 0x0000045C -> Input  Row=  1 Col=  92
    66: LD 0x0000085A -> Input  Row=  2 Col=  90 <-- NEW ROW
    67: LD 0x0000085B -> Input  Row=  2 Col=  91
    68: LD 0x0000085C -> Input  Row=  2 Col=  92
    69: LD 0x00000C5A -> Input  Row=  3 Col=  90 <-- NEW ROW
    70: LD 0x00000C5B -> Input  Row=  3 Col=  91
    71: LD 0x00000C5C -> Input  Row=  3 Col=  92
    72: LD 0x00000003 -> Input  Row=  0 Col=   3 <-- NEW ROW
    73: LD 0x00000015 -> Input  Row=  0 Col=  21
    74: LD 0x00000027 -> Input  Row=  0 Col=  39
    75: LD 0x00000403 -> Input  Row=  1 Col=   3 <-- NEW ROW
    76: LD 0x00000415 -> Input  Row=  1 Col=  21
    77: LD 0x00000427 -> Input  Row=  1 Col=  39
    78: LD 0x00000803 -> Input  Row=  2 Col=   3 <-- NEW ROW
    79: LD 0x00000815 -> Input  Row=  2 Col=  21
    80: LD 0x00000827 -> Input  Row=  2 Col=  39
    81: LD 0x00000C03 -> Input  Row=  3 Col=   3 <-- NEW ROW
    82: LD 0x00000C15 -> Input  Row=  3 Col=  21
    83: LD 0x00000C27 -> Input  Row=  3 Col=  39
    84: LD 0x00000039 -> Input  Row=  0 Col=  57 <-- NEW ROW
    85: LD 0x00000439 -> Input  Row=  1 Col=  57 <-- NEW ROW
    86: LD 0x00000839 -> Input  Row=  2 Col=  57 <-- NEW ROW
    87: LD 0x00000C39 -> Input  Row=  3 Col=  57 <-- NEW ROW
    88: LD 0x0000004B -> Input  Row=  0 Col=  75 <-- NEW ROW
    89: LD 0x0000044B -> Input  Row=  1 Col=  75 <-- NEW ROW
    90: LD 0x0000084B -> Input  Row=  2 Col=  75 <-- NEW ROW
    91: LD 0x00000C4B -> Input  Row=  3 Col=  75 <-- NEW ROW
    92: LD 0x0000005D -> Input  Row=  0 Col=  93 <-- NEW ROW
    93: LD 0x0000045D -> Input  Row=  1 Col=  93 <-- NEW ROW
    94: LD 0x0000085D -> Input  Row=  2 Col=  93 <-- NEW ROW
    95: LD 0x00000C5D -> Input  Row=  3 Col=  93 <-- NEW ROW
    96: LD 0x00000004 -> Input  Row=  0 Col=   4 <-- NEW ROW
    97: LD 0x00000016 -> Input  Row=  0 Col=  22
    98: LD 0x00000028 -> Input  Row=  0 Col=  40
    99: LD 0x00000404 -> Input  Row=  1 Col=   4 <-- NEW ROW

====================================================================================================
8. DISCREPANCY ANALYSIS
====================================================================================================

  Comparison:
  Tensor     ILP             Trace           Ratio (Trace/ILP)   
  ------------------------------------------------------------
  Input      57.60           4096            71.11               
  Weight     3.00            88              29.33               
  Output     4.00            4               1.00                

  Key Observations:
    - ILP computes row_acts based on DRAM level tiling factors
    - Trace counts actual row switches during execution
    - The large discrepancy suggests:
      1. ILP model may only consider Level 3 factors, not Level 2+3
      2. Or trace generator iterates both Level 2 and Level 3 loops
      3. Or the formula for row_aligned mode is incorrect