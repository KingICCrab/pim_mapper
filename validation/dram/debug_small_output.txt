====================================================================================================
DETAILED DEBUG INFO FOR 'small' WORKLOAD
====================================================================================================

====================================================================================================
1. WORKLOAD CONFIGURATION
====================================================================================================
  Name: small
  Dimensions: R=3, S=3, P=8, Q=8, C=16, K=16, N=1
  Bounds: [3, 3, 8, 8, 16, 16, 1]
  MACs: 147456
  Stride: (1, 1)
  Dilation: (1, 1)

  Tensor Sizes:
    Input:  N=1 × C=16 × H=10 × W=10 = 1600 elements
    Weight: K=16 × C=16 × R=3 × S=3 = 2304 elements
    Output: N=1 × K=16 × P=8 × Q=8 = 1024 elements

  Relevancy Matrix O[dim][tensor] (1=relevant, 0=irrelevant):
    Dim      Input    Weight   Output  
    R        1        1        0       
    S        1        1        0       
    P        1        0        1       
    Q        1        0        1       
    C        1        1        0       
    K        0        1        1       
    N        1        0        1       

  Divisors per dimension:
    R: [1, 3]
    S: [1, 3]
    P: [1, 2, 4, 8]
    Q: [1, 2, 4, 8]
    C: [1, 2, 4, 8, 16]
    K: [1, 2, 4, 8, 16]
    N: [1]

====================================================================================================
2. OPTIMIZER RESULT
====================================================================================================

  Solver Status: optimal
  Solve Time: 0.52s

====================================================================================================
3. MAPPING DETAILS
====================================================================================================

  Layout:
    Input:  row_aligned
    Weight: sequential
    Output: sequential

  Tile Info:
    block_h: 10
    block_w: 10

  Loop Bounds (per memory level):
  Memory Hierarchy: Level 0=PE, Level 1=GlobalBuffer, Level 2=RowBuffer, Level 3=LocalDRAM

    Level 0:
      H: {'Q': 8, 'C': 2}
      W: {'P': 4, 'K': 4}
      Internal: (all 1s)
      temporal: {'R': 3, 'S': 3, 'P': 2}

    Level 1:
      spatial: (all 1s)
      temporal: (all 1s)

    Level 2:
      spatial: (all 1s)
      temporal: (all 1s)

    Level 3:
      spatial: (all 1s)
      temporal: {'C': 8, 'K': 4}

  Permutation (per memory level, inner to outer):
    Level 0: R -> P -> S
    Level 1: 
    Level 2: 
    Level 3: K -> C

  Tile Sizes (cumulative up to each level):
    Level 0: {'R': 3, 'S': 3, 'P': 2}
    Level 1: {'R': 3, 'S': 3, 'P': 2}
    Level 2: {'R': 3, 'S': 3, 'P': 2}
    Level 3: {'R': 3, 'S': 3, 'P': 2, 'C': 8, 'K': 4}

====================================================================================================
4. DRAM LEVEL ANALYSIS (Level 2 + Level 3)
====================================================================================================

  DRAM Level Factors (Level 2 × Level 3):
    R: 1
    S: 1
    P: 1
    Q: 1
    C: 8
    K: 4
    N: 1

  Reuse Penalty per Tensor (irrelevant DRAM factors):
    Input: irrelevant dims = ['K'], penalty = 4
    Weight: irrelevant dims = ['P', 'Q', 'N'], penalty = 1
    Output: irrelevant dims = ['R', 'S', 'C'], penalty = 8

  Expected Unique Row Activations (simplified):
    For row_aligned: total_tiles = Π(DRAM factors)
    Total DRAM tiles: 32

====================================================================================================
5. ILP ROW ACTIVATION PREDICTIONS
====================================================================================================

  ILP Predicted Row Activations:
    Input:  8.0000
    Weight: 3.0000
    Output: 1.0000
    Total:  12.0000

  Other Metrics:
    latency: 38.2966
    compute_cycles: 38.2966

====================================================================================================
6. TRACE GENERATION DETAILS
====================================================================================================

  DRAM Config:
    row_buffer_bytes: 1024
    num_banks: 4
    num_rows: 16384
    element_size: 1
    bank_size: 16777216 bytes (16 MB)

  Trace Statistics:
    Total trace lines: 25088

  Input (Bank 0):
    Total accesses: 6400
    Unique addresses: 900
    Unique rows: 9
    Rows accessed: [0, 1, 2, 3, 4, 5, 6, 7, 8]
    Row activations (switches): 57
    Row visit pattern:
      Row 0: activated 4 times
      Row 1: activated 7 times
      Row 2: activated 7 times
      Row 3: activated 7 times
      Row 4: activated 7 times
      Row 5: activated 7 times
      Row 6: activated 7 times
      Row 7: activated 7 times
      Row 8: activated 4 times

  Weight (Bank 1):
    Total accesses: 2304
    Unique addresses: 567
    Unique rows: 2
    Rows accessed: [0, 1]
    Row activations (switches): 16
    Row visit pattern:
      Row 0: activated 8 times
      Row 1: activated 8 times

  Output (Bank 2):
    Total accesses: 16384
    Unique addresses: 448
    Unique rows: 1
    Rows accessed: [0]
    Row activations (switches): 1
    Row visit pattern:
      Row 0: activated 1 times

====================================================================================================
7. SAMPLE TRACE ENTRIES (First 100)
====================================================================================================
     0: LD 0x00000000 -> Input  Row=  0 Col=   0 <-- NEW ROW
     1: LD 0x00000001 -> Input  Row=  0 Col=   1
     2: LD 0x00000002 -> Input  Row=  0 Col=   2
     3: LD 0x00000003 -> Input  Row=  0 Col=   3
     4: LD 0x00000004 -> Input  Row=  0 Col=   4
     5: LD 0x00000005 -> Input  Row=  0 Col=   5
     6: LD 0x00000006 -> Input  Row=  0 Col=   6
     7: LD 0x00000007 -> Input  Row=  0 Col=   7
     8: LD 0x00000008 -> Input  Row=  0 Col=   8
     9: LD 0x00000009 -> Input  Row=  0 Col=   9
    10: LD 0x0000000A -> Input  Row=  0 Col=  10
    11: LD 0x0000000B -> Input  Row=  0 Col=  11
    12: LD 0x0000000C -> Input  Row=  0 Col=  12
    13: LD 0x0000000D -> Input  Row=  0 Col=  13
    14: LD 0x0000000E -> Input  Row=  0 Col=  14
    15: LD 0x0000000F -> Input  Row=  0 Col=  15
    16: LD 0x00000010 -> Input  Row=  0 Col=  16
    17: LD 0x00000011 -> Input  Row=  0 Col=  17
    18: LD 0x00000012 -> Input  Row=  0 Col=  18
    19: LD 0x00000013 -> Input  Row=  0 Col=  19
    20: LD 0x00000014 -> Input  Row=  0 Col=  20
    21: LD 0x00000015 -> Input  Row=  0 Col=  21
    22: LD 0x00000016 -> Input  Row=  0 Col=  22
    23: LD 0x00000017 -> Input  Row=  0 Col=  23
    24: LD 0x00000018 -> Input  Row=  0 Col=  24
    25: LD 0x00000019 -> Input  Row=  0 Col=  25
    26: LD 0x0000001A -> Input  Row=  0 Col=  26
    27: LD 0x0000001B -> Input  Row=  0 Col=  27
    28: LD 0x0000001C -> Input  Row=  0 Col=  28
    29: LD 0x0000001D -> Input  Row=  0 Col=  29
    30: LD 0x0000001E -> Input  Row=  0 Col=  30
    31: LD 0x0000001F -> Input  Row=  0 Col=  31
    32: LD 0x00000020 -> Input  Row=  0 Col=  32
    33: LD 0x00000021 -> Input  Row=  0 Col=  33
    34: LD 0x00000022 -> Input  Row=  0 Col=  34
    35: LD 0x00000023 -> Input  Row=  0 Col=  35
    36: LD 0x00000024 -> Input  Row=  0 Col=  36
    37: LD 0x00000025 -> Input  Row=  0 Col=  37
    38: LD 0x00000026 -> Input  Row=  0 Col=  38
    39: LD 0x00000027 -> Input  Row=  0 Col=  39
    40: LD 0x00000028 -> Input  Row=  0 Col=  40
    41: LD 0x00000029 -> Input  Row=  0 Col=  41
    42: LD 0x0000002A -> Input  Row=  0 Col=  42
    43: LD 0x0000002B -> Input  Row=  0 Col=  43
    44: LD 0x0000002C -> Input  Row=  0 Col=  44
    45: LD 0x0000002D -> Input  Row=  0 Col=  45
    46: LD 0x0000002E -> Input  Row=  0 Col=  46
    47: LD 0x0000002F -> Input  Row=  0 Col=  47
    48: LD 0x00000030 -> Input  Row=  0 Col=  48
    49: LD 0x00000031 -> Input  Row=  0 Col=  49
    50: LD 0x00000032 -> Input  Row=  0 Col=  50
    51: LD 0x00000033 -> Input  Row=  0 Col=  51
    52: LD 0x00000034 -> Input  Row=  0 Col=  52
    53: LD 0x00000035 -> Input  Row=  0 Col=  53
    54: LD 0x00000036 -> Input  Row=  0 Col=  54
    55: LD 0x00000037 -> Input  Row=  0 Col=  55
    56: LD 0x00000038 -> Input  Row=  0 Col=  56
    57: LD 0x00000039 -> Input  Row=  0 Col=  57
    58: LD 0x0000003A -> Input  Row=  0 Col=  58
    59: LD 0x0000003B -> Input  Row=  0 Col=  59
    60: LD 0x0000003C -> Input  Row=  0 Col=  60
    61: LD 0x0000003D -> Input  Row=  0 Col=  61
    62: LD 0x0000003E -> Input  Row=  0 Col=  62
    63: LD 0x0000003F -> Input  Row=  0 Col=  63
    64: LD 0x00000040 -> Input  Row=  0 Col=  64
    65: LD 0x00000041 -> Input  Row=  0 Col=  65
    66: LD 0x00000042 -> Input  Row=  0 Col=  66
    67: LD 0x00000043 -> Input  Row=  0 Col=  67
    68: LD 0x00000044 -> Input  Row=  0 Col=  68
    69: LD 0x00000045 -> Input  Row=  0 Col=  69
    70: LD 0x00000046 -> Input  Row=  0 Col=  70
    71: LD 0x00000047 -> Input  Row=  0 Col=  71
    72: LD 0x00000048 -> Input  Row=  0 Col=  72
    73: LD 0x00000049 -> Input  Row=  0 Col=  73
    74: LD 0x0000004A -> Input  Row=  0 Col=  74
    75: LD 0x0000004B -> Input  Row=  0 Col=  75
    76: LD 0x0000004C -> Input  Row=  0 Col=  76
    77: LD 0x0000004D -> Input  Row=  0 Col=  77
    78: LD 0x0000004E -> Input  Row=  0 Col=  78
    79: LD 0x0000004F -> Input  Row=  0 Col=  79
    80: LD 0x00000050 -> Input  Row=  0 Col=  80
    81: LD 0x00000051 -> Input  Row=  0 Col=  81
    82: LD 0x00000052 -> Input  Row=  0 Col=  82
    83: LD 0x00000053 -> Input  Row=  0 Col=  83
    84: LD 0x00000054 -> Input  Row=  0 Col=  84
    85: LD 0x00000055 -> Input  Row=  0 Col=  85
    86: LD 0x00000056 -> Input  Row=  0 Col=  86
    87: LD 0x00000057 -> Input  Row=  0 Col=  87
    88: LD 0x00000058 -> Input  Row=  0 Col=  88
    89: LD 0x00000059 -> Input  Row=  0 Col=  89
    90: LD 0x0000005A -> Input  Row=  0 Col=  90
    91: LD 0x0000005B -> Input  Row=  0 Col=  91
    92: LD 0x0000005C -> Input  Row=  0 Col=  92
    93: LD 0x0000005D -> Input  Row=  0 Col=  93
    94: LD 0x0000005E -> Input  Row=  0 Col=  94
    95: LD 0x0000005F -> Input  Row=  0 Col=  95
    96: LD 0x00000060 -> Input  Row=  0 Col=  96
    97: LD 0x00000061 -> Input  Row=  0 Col=  97
    98: LD 0x00000062 -> Input  Row=  0 Col=  98
    99: LD 0x00000063 -> Input  Row=  0 Col=  99

====================================================================================================
8. DISCREPANCY ANALYSIS
====================================================================================================

  Comparison:
  Tensor     ILP             Trace           Ratio (Trace/ILP)   
  ------------------------------------------------------------
  Input      8.00            57              7.12                
  Weight     3.00            16              5.33                
  Output     1.00            1               1.00                

  Key Observations:
    - ILP computes row_acts based on DRAM level tiling factors
    - Trace counts actual row switches during execution
    - The large discrepancy suggests:
      1. ILP model may only consider Level 3 factors, not Level 2+3
      2. Or trace generator iterates both Level 2 and Level 3 loops
      3. Or the formula for row_aligned mode is incorrect